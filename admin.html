<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="robots" content="noindex, nofollow">
<title>Admin Panel — Wardon Visuals</title>
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="icon" type="image/png" href="/img/pfp.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Plus Jakarta Sans',system-ui,sans-serif;background:#0a0a0c;color:#fff;font-size:14px}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
#root{min-height:100vh}
/* Login */
.login-wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;background:#0a0a0c}
.login-box{background:#111114;border:1px solid rgba(255,255,255,.06);border-radius:16px;padding:40px;width:360px;text-align:center}
.login-box h1{font-size:24px;font-weight:800;margin-bottom:6px}
.login-box .sub{font-size:12px;color:#55555f;margin-bottom:28px}
.login-box input{width:100%;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:8px;padding:12px 16px;color:#fff;font-family:inherit;font-size:14px;outline:none;margin-bottom:16px}
.login-box button{width:100%;padding:12px;border-radius:10px;border:none;background:#00eb00;color:#fff;font-family:inherit;font-size:14px;font-weight:700;cursor:pointer}
.login-box .err{color:#ef4444;font-size:12px;margin-bottom:12px}
</style>
<script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef } = React;

// ===== ICONS =====
const Icons = {
  grid: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7" rx="1"/><rect x="14" y="3" width="7" height="7" rx="1"/><rect x="3" y="14" width="7" height="7" rx="1"/><rect x="14" y="14" width="7" height="7" rx="1"/></svg>,
  users: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
  star: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>,
  bar: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>,
  layers: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></svg>,
  user: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
  help: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>,
  settings: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>,
  plus: <svg width="16" height="16" fill="none" stroke="currentColor" strokeWidth="2.5" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
  trash: <svg width="15" height="15" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
  edit: <svg width="15" height="15" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>,
  x: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
  logout: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>,
  search: <svg width="18" height="18" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>,
};

// ===== CONSTANTS =====
const GRADIENTS = [
  "linear-gradient(135deg,#1a1040,#4a20a0)","linear-gradient(135deg,#a01020,#e04060)",
  "linear-gradient(135deg,#0a3060,#1070c0)","linear-gradient(135deg,#405010,#80a020)",
  "linear-gradient(135deg,#103020,#208050)","linear-gradient(135deg,#501050,#a030a0)",
  "linear-gradient(135deg,#4a2a0a,#a06020)","linear-gradient(135deg,#0a3a3a,#109090)",
  "linear-gradient(135deg,#3a0a2a,#801060)","linear-gradient(135deg,#2a3a0a,#607010)",
];
const AVATAR_COLORS = ["#6366f1","#ec4899","#f59e0b","#00eb00","#ef4444","#3b82f6","#8b5cf6","#14b8a6","#f97316","#06b6d4"];

const DEFAULT_DATA = {
  thumbnails: [
    { id: "t1", title: "TOP 10 PLAYS", channel: "GamerPro", views: "1.2M", icon: "\u{1f3ae}", gradient: 0, category: "showcase1", channelAvatar: "GP" },
    { id: "t2", title: "iPhone 16 Review", channel: "TechDaily", views: "2.1M", icon: "\u{1f4bb}", gradient: 2, category: "showcase1", channelAvatar: "TD" },
    { id: "t3", title: "Hidden Waterfalls", channel: "NatureVlogs", views: "450K", icon: "\u{1f33f}", gradient: 3, category: "showcase1", channelAvatar: "NV" },
    { id: "t4", title: "30 Day Transform", channel: "FitLife", views: "670K", icon: "\u{1f4aa}", gradient: 4, category: "showcase2", channelAvatar: "FL" },
    { id: "t5", title: "NEW ALBUM REACTION", channel: "MusicBox", views: "3.4M", icon: "\u{1f3b5}", gradient: 5, category: "showcase2", channelAvatar: "MB" },
    { id: "t6", title: "Gordon Ramsay CRIES", channel: "CookMaster", views: "1.8M", icon: "\u{1f373}", gradient: 6, category: "showcase2", channelAvatar: "CM" },
  ],
  creators: [
    { id: "c1", name: "Martin K.", initials: "MK", subs: "1.2M", color: 0 },
    { id: "c2", name: "Tereza P.", initials: "TP", subs: "580K", color: 1 },
    { id: "c3", name: "Jan N.", initials: "JN", subs: "340K", color: 2 },
    { id: "c4", name: "Lucie S.", initials: "LS", subs: "210K", color: 3 },
  ],
  reviews: [
    { id: "r1", text: "Absolutely incredible work. CTR jumped 340% the first month.", author: "Martin Kov\u00e1\u0159", handle: "@MartinK", subs: "1.2M", color: 3, rating: 5 },
    { id: "r2", text: "Finally someone who understands not just design but YouTube itself.", author: "Tereza P.", handle: "@TerezaP", subs: "580K", color: 1, rating: 5 },
  ],
  stats: [
    { id: "s1", value: "3M+", label: "Views" },
    { id: "s2", value: "20+", label: "Clients" },
    { id: "s3", value: "40+", label: "Projects" },
  ],
  process: [
    { id: "p1", title: "Brief & Strategy", desc: "Everything starts with clear communication. After filling out a short form, you'll share your video topic, goal, target audience, and any references you like. Based on this, I analyze your niche and competitors to define a direction with the highest potential to perform.", img: "/img/process-1.png" },
    { id: "p2", title: "Concept & Custom Scene", desc: "I create a visual concept that tells a story and triggers emotion. I work with composition, contrast, lighting, and color psychology to make sure the thumbnail stands out even at a small size. If needed, I can build a fully custom scene in Blender without you having to pose on camera.", img: "/img/process-2.png" },
    { id: "p3", title: "Finalization & Optimization", desc: "Once the concept is approved, I refine every detail \u2014 lighting, shadows, depth, textures, and key highlight elements. The thumbnail is optimized for mobile viewing and maximum readability. The final result is designed to increase CTR and overall video performance. If needed, we can test A/B versions.", img: "/img/process-3.png" },
  ],
  faq: [
    { id: "f1", q: "How fast do you deliver?", a: "Standard delivery is 24-48 hours." },
    { id: "f4", q: "Do you do A/B testing?", a: "Yes i do." },
    { id: "f5", q: "Do you work with international creators?", a: "Absolutely. I work with creators worldwide." },
  ],
  about: { headline: "Design that drives results.", text1: "I specialize in YouTube thumbnails, branding, and visual design.", text2: "Working with creators from 10K to 5M+ subscribers.", photo: "" },
  socials: [
    { id: "so1", platform: "Instagram", url: "https://instagram.com/" },
    { id: "so2", platform: "Twitter / X", url: "https://x.com/" },
    { id: "so3", platform: "Behance", url: "https://behance.net/" },
  ],
  siteSettings: { brandName: "Wardon Visuals", heroHeadline: "Crafting Instant Clicks.", heroSub: "As a creator, you need as many people as possible to click on your video. A professional thumbnail is the first step to success.", email: "wardondesign@gmail.com" },
  seo: {
    metaTitle: "Wardon Visuals — Professional YouTube Thumbnail Design",
    metaDescription: "Professional YouTube thumbnail design that drives clicks, money, and curiosity. Custom 3D scenes, A/B testing, and fast 24-48h delivery. Trusted by creators worldwide.",
    metaKeywords: "YouTube thumbnail design, thumbnail designer, YouTube thumbnails, CTR optimization, thumbnail A/B testing, custom thumbnails, 3D thumbnail design, Blender thumbnails",
    canonicalUrl: "https://wardon-design.vercel.app/",
    robotsIndex: "index",
    robotsFollow: "follow",
    ogTitle: "Wardon Visuals — Professional YouTube Thumbnail Design",
    ogDescription: "Thumbnails that drive clicks. Custom 3D scenes, fast delivery, and designs optimized for maximum CTR. Trusted by creators worldwide.",
    ogImage: "https://wardon-design.vercel.app/img/pfp.png",
    twitterCard: "summary",
    twitterTitle: "Wardon Visuals — YouTube Thumbnail Design",
    twitterDescription: "Thumbnails that drive clicks. Custom 3D scenes, fast delivery, and designs optimized for maximum CTR.",
    twitterImage: "https://wardon-design.vercel.app/img/pfp.png",
    schemaName: "Wardon Visuals",
    schemaDescription: "Professional YouTube thumbnail design service. Custom 3D scenes, A/B testing, and fast delivery.",
    schemaServiceType: "YouTube Thumbnail Design",
    schemaPriceRange: "$$",
    schemaAreaServed: "Worldwide",
  },
};

function uid() { return Date.now().toString(36) + Math.random().toString(36).slice(2, 7); }

// ===== API HELPERS =====
function getToken() { return sessionStorage.getItem("admin-token") || ""; }
function getAdminEmail() { return sessionStorage.getItem("admin-email") || ""; }

async function apiGet() {
  const res = await fetch("/api/get-data");
  if (res.status === 404) return null;
  if (!res.ok) throw new Error("Failed to load data");
  return res.json();
}

async function apiSave(data) {
  const res = await fetch("/api/save-data", {
    method: "POST",
    headers: { "Content-Type": "application/json", "Authorization": "Bearer " + getToken() },
    body: JSON.stringify(data),
  });
  if (res.status === 401) {
    sessionStorage.removeItem("admin-token");
    sessionStorage.removeItem("admin-email");
    window.location.reload();
    throw new Error("Unauthorized");
  }
  if (!res.ok) throw new Error("Failed to save");
  return res.json();
}

// ===== LOGIN GATE =====
function LoginGate({ onLogin }) {
  const [email, setEmail] = useState("");
  const [pw, setPw] = useState("");
  const [err, setErr] = useState("");
  const [loading, setLoading] = useState(false);

  const submit = async (e) => {
    e.preventDefault();
    if (!email.trim() || !pw.trim()) return;
    setLoading(true);
    setErr("");
    try {
      const res = await fetch("/api/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email: email.trim(), password: pw }),
      });
      if (res.status === 401) {
        setErr("Nesprávný email nebo heslo");
        setLoading(false);
        return;
      }
      if (!res.ok) {
        setErr("Chyba serveru");
        setLoading(false);
        return;
      }
      const data = await res.json();
      sessionStorage.setItem("admin-token", email.trim().toLowerCase() + ":" + pw);
      sessionStorage.setItem("admin-email", data.email);
      onLogin();
    } catch (e) {
      setErr("Chyba připojení");
      setLoading(false);
    }
  };

  return (
    <div className="login-wrap">
      <form className="login-box" onSubmit={submit}>
        <h1>Wardon Visuals<span style={{ color: "#00eb00" }}>.</span></h1>
        <div className="sub">Admin Panel — přihlášení</div>
        {err && <div className="err">{err}</div>}
        <input type="email" value={email} onChange={e => setEmail(e.target.value)} placeholder="Email" autoFocus />
        <input type="password" value={pw} onChange={e => setPw(e.target.value)} placeholder="Heslo" />
        <button type="submit" disabled={loading}>{loading ? "Ověřuji..." : "Přihlásit"}</button>
      </form>
    </div>
  );
}

// ===== MAIN APP =====
function App() {
  const [loggedIn, setLoggedIn] = useState(!!sessionStorage.getItem("admin-token"));

  if (!loggedIn) return <LoginGate onLogin={() => setLoggedIn(true)} />;
  return <AdminPanel />;
}

function AdminPanel() {
  const [data, setData] = useState(DEFAULT_DATA);
  const [activeTab, setActiveTab] = useState("thumbnails");
  const [modal, setModal] = useState(null);
  const [toast, setToast] = useState(null);
  const [subFilter, setSubFilter] = useState("all");
  const [loading, setLoading] = useState(true);

  // Load from API
  useEffect(() => {
    (async () => {
      try {
        const r = await apiGet();
        if (r) setData(r);
      } catch (e) { /* use defaults */ }
      setLoading(false);
    })();
  }, []);

  // Save
  const save = async (newData) => {
    setData(newData);
    try {
      await apiSave(newData);
      showToast("Uloženo \u2713");
    } catch (e) {
      showToast("Chyba při ukládání!");
    }
  };

  const showToast = (msg) => { setToast(msg); setTimeout(() => setToast(null), 2000); };

  const logout = () => {
    sessionStorage.removeItem("admin-token");
    sessionStorage.removeItem("admin-email");
    window.location.reload();
  };

  const tabs = [
    { id: "thumbnails", label: "Thumbnaily", icon: Icons.grid, count: data.thumbnails.length },
    { id: "creators", label: "Tvůrci", icon: Icons.users, count: data.creators.length },
    { id: "reviews", label: "Recenze", icon: Icons.star, count: data.reviews.length },
    { id: "stats", label: "Statistiky", icon: Icons.bar, count: data.stats.length },
    { id: "process", label: "Process", icon: Icons.layers, count: data.process.length },
    { id: "faq", label: "FAQ", icon: Icons.help, count: data.faq.length },
    { id: "about", label: "About", icon: Icons.user },
    { id: "socials", label: "Socials", icon: Icons.grid, count: data.socials.length },
    { id: "seo", label: "SEO", icon: Icons.search },
    { id: "settings", label: "Nastavení", icon: Icons.settings },
  ];

  const deleteItem = (section, id) => { save({ ...data, [section]: data[section].filter(x => x.id !== id) }); };
  const addItem = (section, item) => { save({ ...data, [section]: [...data[section], { ...item, id: uid() }] }); setModal(null); };
  const updateItem = (section, id, updates) => { save({ ...data, [section]: data[section].map(x => x.id === id ? { ...x, ...updates } : x) }); setModal(null); };

  if (loading) return <div style={{ minHeight: "100vh", display: "flex", alignItems: "center", justifyContent: "center", background: "#0a0a0c", color: "#55555f" }}>Načítání...</div>;

  return (
    <div style={{ display: "flex", height: "100vh", background: "#0a0a0c", color: "#fff", fontFamily: "'Plus Jakarta Sans', system-ui, sans-serif", fontSize: "14px" }}>
      {/* SIDEBAR */}
      <aside style={{ width: 240, background: "#111114", borderRight: "1px solid rgba(255,255,255,.06)", display: "flex", flexDirection: "column", flexShrink: 0 }}>
        <div style={{ padding: "20px 20px 16px", borderBottom: "1px solid rgba(255,255,255,.06)" }}>
          <div style={{ fontWeight: 800, fontSize: 18 }}>{data.siteSettings.brandName}<span style={{ color: "#00eb00" }}>.</span></div>
          <div style={{ fontSize: 11, color: "#55555f", marginTop: 2 }}>Admin Panel</div>
        </div>
        <nav style={{ flex: 1, padding: "12px 10px", overflowY: "auto" }}>
          {tabs.map(t => (
            <button key={t.id} onClick={() => { setActiveTab(t.id); setSubFilter("all"); }}
              style={{ width: "100%", display: "flex", alignItems: "center", gap: 10, padding: "10px 12px", borderRadius: 8, border: "none", background: activeTab === t.id ? "rgba(0,235,0,.1)" : "transparent", color: activeTab === t.id ? "#00eb00" : "#8a8a9a", cursor: "pointer", fontFamily: "inherit", fontSize: 13, fontWeight: 600, marginBottom: 2, transition: "all .2s", textAlign: "left" }}>
              {t.icon}
              <span style={{ flex: 1 }}>{t.label}</span>
              {t.count !== undefined && <span style={{ fontSize: 11, background: "rgba(255,255,255,.06)", padding: "2px 8px", borderRadius: 10, color: "#55555f" }}>{t.count}</span>}
            </button>
          ))}
        </nav>
        <div style={{ padding: "12px 10px", borderTop: "1px solid rgba(255,255,255,.06)" }}>
          <div style={{ padding: "8px 12px 10px", fontSize: 11, color: "#55555f", wordBreak: "break-all" }}>{getAdminEmail()}</div>
          <button onClick={logout} style={{ width: "100%", display: "flex", alignItems: "center", gap: 10, padding: "10px 12px", borderRadius: 8, border: "none", background: "transparent", color: "#ef4444", cursor: "pointer", fontFamily: "inherit", fontSize: 13, fontWeight: 600 }}>
            {Icons.logout} Odhlásit
          </button>
        </div>
      </aside>

      {/* MAIN */}
      <main style={{ flex: 1, overflowY: "auto", padding: 32 }}>
        {activeTab === "thumbnails" && <ThumbnailsTab data={data} subFilter={subFilter} setSubFilter={setSubFilter} onDelete={(id) => deleteItem("thumbnails", id)} onAdd={(item) => addItem("thumbnails", item)} onEdit={(id, u) => updateItem("thumbnails", id, u)} setModal={setModal} />}
        {activeTab === "creators" && <CrudSection title="Tvůrci" subtitle="Trusted by — scrollující strip avatarů" items={data.creators}
          onDelete={(id) => deleteItem("creators", id)} onAdd={() => setModal({ type: "creator" })}
          renderItem={(c) => (
            <div style={{ display: "flex", alignItems: "center", gap: 14 }}>
              {c.avatar ? <img src={c.avatar} alt={c.name} style={{ width: 40, height: 40, borderRadius: "50%", objectFit: "cover" }} onError={e => { e.target.style.display = "none"; }} /> : <div style={{ width: 40, height: 40, borderRadius: "50%", background: AVATAR_COLORS[c.color % 10], display: "flex", alignItems: "center", justifyContent: "center", fontWeight: 800, fontSize: 12 }}>{c.initials}</div>}
              <div><div style={{ fontWeight: 700 }}>{c.name}</div><div style={{ fontSize: 12, color: "#55555f" }}>{c.subs} odběratelů</div></div>
            </div>
          )} onEdit={(c) => setModal({ type: "creator", editing: c })} />}
        {activeTab === "reviews" && <CrudSection title="Recenze" subtitle="Testimonials — karty s citacemi klientů" items={data.reviews}
          onDelete={(id) => deleteItem("reviews", id)} onAdd={() => setModal({ type: "review" })}
          renderItem={(r) => (
            <div>
              <div style={{ color: "#fbbf24", fontSize: 12, letterSpacing: 2, marginBottom: 6 }}>{"★".repeat(r.rating)}{"☆".repeat(5 - r.rating)}</div>
              <div style={{ fontSize: 13, color: "rgba(255,255,255,.7)", fontStyle: "italic", marginBottom: 10, lineHeight: 1.5 }}>"{r.text}"</div>
              <div style={{ display: "flex", alignItems: "center", gap: 10 }}>
                <div style={{ width: 32, height: 32, borderRadius: "50%", background: AVATAR_COLORS[r.color % 10], display: "flex", alignItems: "center", justifyContent: "center", fontWeight: 800, fontSize: 10 }}>{r.author.split(" ").map(w=>w[0]).join("")}</div>
                <div><div style={{ fontWeight: 700, fontSize: 13 }}>{r.author}</div><div style={{ fontSize: 11, color: "#55555f" }}>{r.handle} · {r.subs} subs</div></div>
              </div>
            </div>
          )} onEdit={(r) => setModal({ type: "review", editing: r })} />}
        {activeTab === "stats" && <CrudSection title="Statistiky" subtitle="Scrollující marquee s čísly" items={data.stats}
          onDelete={(id) => deleteItem("stats", id)} onAdd={() => setModal({ type: "stat" })}
          renderItem={(s) => (
            <div style={{ display: "flex", alignItems: "baseline", gap: 12 }}>
              <span style={{ fontSize: 22, fontWeight: 800 }}>{s.value}</span>
              <span style={{ fontSize: 13, color: "#8a8a9a" }}>{s.label}</span>
            </div>
          )} onEdit={(s) => setModal({ type: "stat", editing: s })} />}
        {activeTab === "process" && <CrudSection title="Process" subtitle="3 kroky designového procesu" items={data.process}
          onDelete={(id) => deleteItem("process", id)} onAdd={() => setModal({ type: "process" })}
          renderItem={(p, i) => (
            <div style={{ display: "flex", gap: 16, alignItems: "flex-start" }}>
              <div style={{ width: 36, height: 36, borderRadius: "50%", background: "#00eb00", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: 800, flexShrink: 0 }}>{i + 1}</div>
              <div><div style={{ fontWeight: 700, marginBottom: 4 }}>{p.title}</div><div style={{ fontSize: 12, color: "#8a8a9a", lineHeight: 1.5 }}>{p.desc}</div></div>
            </div>
          )} onEdit={(p) => setModal({ type: "process", editing: p })} />}
        {activeTab === "faq" && <CrudSection title="FAQ" subtitle="Otázky a odpovědi — accordion" items={data.faq}
          onDelete={(id) => deleteItem("faq", id)} onAdd={() => setModal({ type: "faq" })}
          renderItem={(f) => (
            <div><div style={{ fontWeight: 700, marginBottom: 6 }}>{f.q}</div><div style={{ fontSize: 12, color: "#8a8a9a", lineHeight: 1.5 }}>{f.a}</div></div>
          )} onEdit={(f) => setModal({ type: "faq", editing: f })} />}
        {activeTab === "about" && <AboutTab data={data} save={save} setModal={setModal} />}
        {activeTab === "socials" && <CrudSection title="Socials" subtitle="Odkazy na sociální sítě" items={data.socials}
          onDelete={(id) => deleteItem("socials", id)} onAdd={() => setModal({ type: "social" })}
          renderItem={(s) => (
            <div style={{ display: "flex", alignItems: "center", gap: 12 }}>
              <div style={{ fontWeight: 700 }}>{s.platform}</div>
              <div style={{ fontSize: 12, color: "#00eb00", wordBreak: "break-all" }}>{s.url}</div>
            </div>
          )} onEdit={(s) => setModal({ type: "social", editing: s })} />}
        {activeTab === "seo" && <SeoTab data={data} save={save} />}
        {activeTab === "settings" && <SettingsTab data={data} save={save} />}
      </main>

      {/* MODAL */}
      {modal && <ModalForm modal={modal} close={() => setModal(null)} addItem={addItem} updateItem={updateItem} />}

      {/* TOAST */}
      {toast && <div style={{ position: "fixed", bottom: 24, right: 24, background: toast.includes("Chyba") ? "#ef4444" : "#00eb00", color: "#fff", padding: "10px 20px", borderRadius: 10, fontWeight: 700, fontSize: 13, zIndex: 9999, animation: "fadeIn .3s ease" }}>{toast}</div>}
    </div>
  );
}

// ===== THUMBNAILS TAB =====
function ThumbnailsTab({ data, subFilter, setSubFilter, onDelete, onAdd, onEdit, setModal }) {
  const filtered = subFilter === "all" ? data.thumbnails : data.thumbnails.filter(t => t.category === subFilter);
  return (
    <div>
      <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 8 }}>
        <div>
          <h1 style={{ fontSize: 22, fontWeight: 800, marginBottom: 4 }}>Thumbnaily / Portfolio</h1>
          <p style={{ fontSize: 13, color: "#8a8a9a" }}>Showcase #1 (s profilkou) · Showcase #2 (jen obrázky)</p>
        </div>
        <button onClick={() => setModal({ type: "thumbnail" })} style={addBtnStyle}>{Icons.plus} Přidat</button>
      </div>
      <div style={{ display: "flex", gap: 8, marginBottom: 24, marginTop: 16 }}>
        {[["all","Vše"],["showcase1","Showcase #1"],["showcase2","Showcase #2"]].map(([k,l]) => (
          <button key={k} onClick={() => setSubFilter(k)}
            style={{ padding: "8px 18px", borderRadius: 100, border: "1px solid " + (subFilter === k ? "#00eb00" : "rgba(255,255,255,.06)"), background: subFilter === k ? "rgba(0,235,0,.1)" : "transparent", color: subFilter === k ? "#00eb00" : "#8a8a9a", cursor: "pointer", fontFamily: "inherit", fontSize: 12, fontWeight: 600 }}>
            {l} {k !== "all" && <span style={{ marginLeft: 6, opacity: .5 }}>({data.thumbnails.filter(t => k === "all" || t.category === k).length})</span>}
          </button>
        ))}
      </div>
      <div style={{ display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(280px, 1fr))", gap: 14 }}>
        {filtered.map(t => (
          <div key={t.id} style={{ borderRadius: 12, overflow: "hidden", border: "1px solid rgba(255,255,255,.06)", background: "#161619", transition: "all .3s" }}>
            <div style={{ height: 140, background: t.image ? "#000" : GRADIENTS[t.gradient % 10], display: "flex", alignItems: "center", justifyContent: "center", position: "relative", overflow: "hidden" }}>
              {t.image ? <img src={t.image} alt={t.title} style={{ width: "100%", height: "100%", objectFit: "cover" }} onError={e => { e.target.style.display = "none"; }} /> : <span style={{ fontSize: 40 }}>{t.icon}</span>}
              <div style={{ position: "absolute", top: 8, right: 8, background: t.category === "showcase1" ? "#00eb00" : "#6366f1", padding: "3px 10px", borderRadius: 6, fontSize: 10, fontWeight: 700 }}>
                {t.category === "showcase1" ? "S1" : "S2"}
              </div>
            </div>
            <div style={{ padding: 14 }}>
              <div style={{ fontWeight: 700, marginBottom: 2 }}>{t.title}</div>
              <div style={{ fontSize: 12, color: "#55555f" }}>{t.channel} · {t.views} views</div>
              <div style={{ display: "flex", gap: 8, marginTop: 12 }}>
                <button onClick={() => setModal({ type: "thumbnail", editing: t })} style={smallBtnStyle}>{Icons.edit}</button>
                <button onClick={() => onDelete(t.id)} style={{ ...smallBtnStyle, color: "#ef4444" }}>{Icons.trash}</button>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}

// ===== GENERIC CRUD SECTION =====
function CrudSection({ title, subtitle, items, onDelete, onAdd, renderItem, onEdit }) {
  return (
    <div>
      <div style={{ display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: 24 }}>
        <div><h1 style={{ fontSize: 22, fontWeight: 800, marginBottom: 4 }}>{title}</h1><p style={{ fontSize: 13, color: "#8a8a9a" }}>{subtitle}</p></div>
        <button onClick={onAdd} style={addBtnStyle}>{Icons.plus} Přidat</button>
      </div>
      <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
        {items.map((item, i) => (
          <div key={item.id} style={{ padding: 18, borderRadius: 12, background: "#161619", border: "1px solid rgba(255,255,255,.06)", display: "flex", justifyContent: "space-between", alignItems: "center", gap: 16 }}>
            <div style={{ flex: 1 }}>{renderItem(item, i)}</div>
            <div style={{ display: "flex", gap: 8, flexShrink: 0 }}>
              <button onClick={() => onEdit(item)} style={smallBtnStyle}>{Icons.edit}</button>
              <button onClick={() => onDelete(item.id)} style={{ ...smallBtnStyle, color: "#ef4444" }}>{Icons.trash}</button>
            </div>
          </div>
        ))}
        {items.length === 0 && <div style={{ textAlign: "center", padding: 40, color: "#55555f" }}>Zatím prázdné. Klikni na "Přidat".</div>}
      </div>
    </div>
  );
}

// ===== ABOUT TAB =====
function AboutTab({ data, save, setModal }) {
  const [form, setForm] = useState(data.about);
  const deleteStatFromAbout = (id) => { save({ ...data, stats: data.stats.filter(x => x.id !== id) }); };
  return (
    <div>
      <h1 style={{ fontSize: 22, fontWeight: 800, marginBottom: 4 }}>About Me</h1>
      <p style={{ fontSize: 13, color: "#8a8a9a", marginBottom: 24 }}>Sekce "Built for Creators" — texty + statistiky zobrazené na homepage</p>

      {/* ABOUT TEXT */}
      <div style={{ background: "#161619", border: "1px solid rgba(255,255,255,.06)", borderRadius: 12, padding: 24, marginBottom: 32 }}>
        <h3 style={{ fontSize: 15, fontWeight: 700, marginBottom: 16 }}>Texty sekce</h3>
        <div style={{ display: "flex", flexDirection: "column", gap: 14, maxWidth: 600 }}>
          <Field label="Nadpis sekce" value={form.headline} onChange={v => setForm({ ...form, headline: v })} placeholder="např. Design that drives results." />
          <Field label="Hlavní text (levý sloupec)" value={form.text1} onChange={v => setForm({ ...form, text1: v })} textarea placeholder="Popis vaší práce a specializace..." />
          <Field label="Doplňkový text" value={form.text2} onChange={v => setForm({ ...form, text2: v })} textarea placeholder="Další informace o zkušenostech..." />
          <ImageUpload label="Fotka / Obrázek" value={form.photo || ""} onChange={v => setForm({ ...form, photo: v })} />
          <button onClick={() => save({ ...data, about: form })} style={{ ...addBtnStyle, alignSelf: "flex-start" }}>Uložit texty</button>
        </div>
      </div>

      {/* STATS IN ABOUT */}
      <div style={{ background: "#161619", border: "1px solid rgba(255,255,255,.06)", borderRadius: 12, padding: 24 }}>
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 16 }}>
          <div>
            <h3 style={{ fontSize: 15, fontWeight: 700, marginBottom: 4 }}>Statistiky</h3>
            <p style={{ fontSize: 12, color: "#55555f" }}>Zobrazují se v About sekci i ve Stats marquee na homepage</p>
          </div>
          <button onClick={() => setModal({ type: "stat" })} style={addBtnStyle}>{Icons.plus} Přidat</button>
        </div>
        <div style={{ display: "flex", flexDirection: "column", gap: 10 }}>
          {data.stats.map(s => (
            <div key={s.id} style={{ padding: 14, borderRadius: 10, background: "rgba(255,255,255,.02)", border: "1px solid rgba(255,255,255,.04)", display: "flex", justifyContent: "space-between", alignItems: "center", gap: 16 }}>
              <div style={{ display: "flex", alignItems: "baseline", gap: 12 }}>
                <span style={{ fontSize: 22, fontWeight: 800 }}>{s.value}</span>
                <span style={{ fontSize: 13, color: "#8a8a9a" }}>{s.label}</span>
              </div>
              <div style={{ display: "flex", gap: 8, flexShrink: 0 }}>
                <button onClick={() => setModal({ type: "stat", editing: s })} style={smallBtnStyle}>{Icons.edit}</button>
                <button onClick={() => deleteStatFromAbout(s.id)} style={{ ...smallBtnStyle, color: "#ef4444" }}>{Icons.trash}</button>
              </div>
            </div>
          ))}
          {data.stats.length === 0 && <div style={{ textAlign: "center", padding: 24, color: "#55555f" }}>Žádné statistiky. Klikni na "Přidat".</div>}
        </div>
      </div>
    </div>
  );
}

// ===== SEO TAB =====
function SeoTab({ data, save }) {
  const seoDefaults = DEFAULT_DATA.seo;
  const [form, setForm] = useState({ ...seoDefaults, ...(data.seo || {}) });
  const [aiLoading, setAiLoading] = useState(null);
  const set = (k, v) => setForm({ ...form, [k]: v });

  const charCounter = (val, min, max) => {
    const len = (val || "").length;
    const color = len >= min && len <= max ? "#00eb00" : len > max ? "#ef4444" : "#f59e0b";
    return <span style={{ fontSize: 11, color, fontWeight: 600 }}>{len} / {min}-{max} znaků</span>;
  };

  // AI text generation templates
  const brandName = data.siteSettings?.brandName || "Wardon Visuals";
  const aiTemplates = {
    metaTitle: [
      `${brandName} — Professional YouTube Thumbnail Design`,
      `${brandName} | Custom Thumbnails That Drive Clicks`,
      `${brandName} — Thumbnail Designer for YouTubers`,
      `${brandName} | YouTube Thumbnail Design & CTR Boost`,
    ],
    metaDescription: [
      `Professional YouTube thumbnail design by ${brandName}. Custom 3D scenes, A/B testing, and fast 24-48h delivery. Trusted by creators worldwide. Boost your CTR today.`,
      `${brandName} creates stunning YouTube thumbnails that drive clicks and views. Custom designs, fast turnaround, and proven results for creators of all sizes.`,
      `Get professional YouTube thumbnails from ${brandName}. Expert design, 3D renders, and CTR optimization. Trusted by 20+ creators with 3M+ views generated.`,
    ],
    ogTitle: [
      `${brandName} — Thumbnails That Drive Clicks`,
      `${brandName} | Professional YouTube Thumbnail Design`,
      `Get More Clicks with ${brandName} Thumbnail Design`,
    ],
    ogDescription: [
      `Professional thumbnail design that stops the scroll. Custom 3D scenes, fast delivery, and designs optimized for maximum CTR. Get started today.`,
      `Thumbnails crafted to drive clicks and curiosity. ${brandName} delivers professional YouTube thumbnail design trusted by creators worldwide.`,
    ],
    twitterTitle: [
      `${brandName} — YouTube Thumbnail Design`,
      `Professional Thumbnails by ${brandName}`,
      `${brandName} | Click-Worthy Thumbnail Design`,
    ],
    twitterDescription: [
      `Thumbnails that drive clicks. Custom 3D scenes, fast delivery, and CTR-optimized designs. Check out ${brandName}.`,
      `Professional YouTube thumbnail design by ${brandName}. Fast turnaround, custom scenes, proven results.`,
    ],
  };

  const generateAi = (field) => {
    setAiLoading(field);
    setTimeout(() => {
      const templates = aiTemplates[field];
      if (templates) {
        const current = form[field] || "";
        const available = templates.filter(t => t !== current);
        const pick = available[Math.floor(Math.random() * available.length)] || templates[0];
        set(field, pick);
      }
      setAiLoading(null);
    }, 600);
  };

  const aiBtnStyle = { padding: "4px 10px", borderRadius: 6, border: "1px solid rgba(138,99,255,.3)", background: "rgba(138,99,255,.1)", color: "#a78bfa", cursor: "pointer", fontFamily: "inherit", fontSize: 11, fontWeight: 600, display: "inline-flex", alignItems: "center", gap: 4 };

  const AiBtn = ({ field }) => (
    <button onClick={() => generateAi(field)} disabled={aiLoading === field} style={{ ...aiBtnStyle, opacity: aiLoading === field ? 0.5 : 1 }}>
      {aiLoading === field ? "..." : "✦ Generovat"}
    </button>
  );

  // SERP Preview
  const previewTitle = (form.metaTitle || "").slice(0, 60) || "Název stránky";
  const previewUrl = form.canonicalUrl || "https://example.com";
  const previewDesc = (form.metaDescription || "").slice(0, 160) || "Popis stránky...";

  return (
    <div>
      <h1 style={{ fontSize: 22, fontWeight: 800, marginBottom: 4 }}>SEO</h1>
      <p style={{ fontSize: 13, color: "#8a8a9a", marginBottom: 24 }}>Správa meta tagů, Open Graph, Twitter Card a strukturovaných dat</p>

      {/* SECTION A: Basic SEO */}
      <div style={{ background: "#161619", border: "1px solid rgba(255,255,255,.06)", borderRadius: 12, padding: 24, marginBottom: 24 }}>
        <h3 style={{ fontSize: 15, fontWeight: 700, marginBottom: 16 }}>Základní SEO</h3>
        <div style={{ display: "flex", flexDirection: "column", gap: 14, maxWidth: 600 }}>
          <div>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
              <div style={{ display: "flex", alignItems: "center", gap: 8 }}><span style={labelStyle}>Meta Title</span> <AiBtn field="metaTitle" /></div>
              {charCounter(form.metaTitle, 50, 60)}
            </div>
            <input value={form.metaTitle} onChange={e => set("metaTitle", e.target.value)} style={fieldInputStyle} placeholder="Název stránky pro vyhledávače" />
          </div>
          <div>
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
              <div style={{ display: "flex", alignItems: "center", gap: 8 }}><span style={labelStyle}>Meta Description</span> <AiBtn field="metaDescription" /></div>
              {charCounter(form.metaDescription, 150, 160)}
            </div>
            <textarea value={form.metaDescription} onChange={e => set("metaDescription", e.target.value)} style={{ ...fieldInputStyle, minHeight: 80, resize: "vertical" }} placeholder="Popis stránky pro vyhledávače" />
          </div>
          <Field label="Meta Keywords" value={form.metaKeywords} onChange={v => set("metaKeywords", v)} placeholder="klíčová slova oddělená čárkou" />
          <Field label="Canonical URL" value={form.canonicalUrl} onChange={v => set("canonicalUrl", v)} placeholder="https://example.com/" />
          <div>
            <div style={labelStyle}>Robots</div>
            <div style={{ display: "flex", gap: 12 }}>
              <div style={{ flex: 1 }}>
                <div style={{ fontSize: 11, color: "#55555f", marginBottom: 4 }}>Indexování</div>
                <div style={{ display: "flex", gap: 8 }}>
                  {["index", "noindex"].map(v => (
                    <button key={v} onClick={() => set("robotsIndex", v)} style={{ flex: 1, padding: "8px", borderRadius: 8, border: "1px solid " + (form.robotsIndex === v ? "#00eb00" : "rgba(255,255,255,.06)"), background: form.robotsIndex === v ? "rgba(0,235,0,.1)" : "transparent", color: form.robotsIndex === v ? "#00eb00" : "#8a8a9a", cursor: "pointer", fontFamily: "inherit", fontSize: 12, fontWeight: 600 }}>{v}</button>
                  ))}
                </div>
              </div>
              <div style={{ flex: 1 }}>
                <div style={{ fontSize: 11, color: "#55555f", marginBottom: 4 }}>Odkazy</div>
                <div style={{ display: "flex", gap: 8 }}>
                  {["follow", "nofollow"].map(v => (
                    <button key={v} onClick={() => set("robotsFollow", v)} style={{ flex: 1, padding: "8px", borderRadius: 8, border: "1px solid " + (form.robotsFollow === v ? "#00eb00" : "rgba(255,255,255,.06)"), background: form.robotsFollow === v ? "rgba(0,235,0,.1)" : "transparent", color: form.robotsFollow === v ? "#00eb00" : "#8a8a9a", cursor: "pointer", fontFamily: "inherit", fontSize: 12, fontWeight: 600 }}>{v}</button>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* SECTION B: Open Graph */}
      <div style={{ background: "#161619", border: "1px solid rgba(255,255,255,.06)", borderRadius: 12, padding: 24, marginBottom: 24 }}>
        <h3 style={{ fontSize: 15, fontWeight: 700, marginBottom: 16 }}>Open Graph (Facebook / LinkedIn)</h3>
        <div style={{ display: "flex", flexDirection: "column", gap: 14, maxWidth: 600 }}>
          <div>
            <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}><span style={labelStyle}>OG Title</span> <AiBtn field="ogTitle" /></div>
            <input value={form.ogTitle} onChange={e => set("ogTitle", e.target.value)} style={fieldInputStyle} placeholder="Titulek pro sdílení na sociálních sítích" />
          </div>
          <div>
            <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}><span style={labelStyle}>OG Description</span> <AiBtn field="ogDescription" /></div>
            <textarea value={form.ogDescription} onChange={e => set("ogDescription", e.target.value)} style={{ ...fieldInputStyle, minHeight: 80, resize: "vertical" }} placeholder="Popis pro sdílení na sociálních sítích" />
          </div>
          <ImageUpload label="OG Image" value={form.ogImage} onChange={v => set("ogImage", v)} />
        </div>
      </div>

      {/* SECTION C: Twitter Card */}
      <div style={{ background: "#161619", border: "1px solid rgba(255,255,255,.06)", borderRadius: 12, padding: 24, marginBottom: 24 }}>
        <h3 style={{ fontSize: 15, fontWeight: 700, marginBottom: 16 }}>Twitter Card</h3>
        <div style={{ display: "flex", flexDirection: "column", gap: 14, maxWidth: 600 }}>
          <div>
            <div style={labelStyle}>Typ karty</div>
            <div style={{ display: "flex", gap: 8 }}>
              {["summary", "summary_large_image"].map(v => (
                <button key={v} onClick={() => set("twitterCard", v)} style={{ flex: 1, padding: "10px", borderRadius: 8, border: "1px solid " + (form.twitterCard === v ? "#00eb00" : "rgba(255,255,255,.06)"), background: form.twitterCard === v ? "rgba(0,235,0,.1)" : "transparent", color: form.twitterCard === v ? "#00eb00" : "#8a8a9a", cursor: "pointer", fontFamily: "inherit", fontSize: 12, fontWeight: 600 }}>{v}</button>
              ))}
            </div>
          </div>
          <div>
            <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}><span style={labelStyle}>Twitter Title</span> <AiBtn field="twitterTitle" /></div>
            <input value={form.twitterTitle} onChange={e => set("twitterTitle", e.target.value)} style={fieldInputStyle} placeholder="Titulek pro Twitter" />
          </div>
          <div>
            <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}><span style={labelStyle}>Twitter Description</span> <AiBtn field="twitterDescription" /></div>
            <textarea value={form.twitterDescription} onChange={e => set("twitterDescription", e.target.value)} style={{ ...fieldInputStyle, minHeight: 80, resize: "vertical" }} placeholder="Popis pro Twitter" />
          </div>
          <ImageUpload label="Twitter Image" value={form.twitterImage} onChange={v => set("twitterImage", v)} />
        </div>
      </div>

      {/* SECTION D: Structured Data */}
      <div style={{ background: "#161619", border: "1px solid rgba(255,255,255,.06)", borderRadius: 12, padding: 24, marginBottom: 24 }}>
        <h3 style={{ fontSize: 15, fontWeight: 700, marginBottom: 16 }}>Structured Data (JSON-LD)</h3>
        <div style={{ display: "flex", flexDirection: "column", gap: 14, maxWidth: 600 }}>
          <Field label="Business Name" value={form.schemaName} onChange={v => set("schemaName", v)} placeholder="Název firmy / služby" />
          <Field label="Description" value={form.schemaDescription} onChange={v => set("schemaDescription", v)} textarea placeholder="Popis služby" />
          <Field label="Service Type" value={form.schemaServiceType} onChange={v => set("schemaServiceType", v)} placeholder="např. YouTube Thumbnail Design" />
          <Field label="Price Range" value={form.schemaPriceRange} onChange={v => set("schemaPriceRange", v)} placeholder="např. $$" />
          <Field label="Area Served" value={form.schemaAreaServed} onChange={v => set("schemaAreaServed", v)} placeholder="např. Worldwide" />
        </div>
      </div>

      {/* SECTION E: SERP Preview */}
      <div style={{ background: "#161619", border: "1px solid rgba(255,255,255,.06)", borderRadius: 12, padding: 24, marginBottom: 24 }}>
        <h3 style={{ fontSize: 15, fontWeight: 700, marginBottom: 16 }}>Google SERP Preview</h3>
        <div style={{ background: "#fff", borderRadius: 10, padding: 20, maxWidth: 600 }}>
          <div style={{ fontSize: 18, color: "#1a0dab", fontFamily: "Arial, sans-serif", marginBottom: 4, lineHeight: 1.3, cursor: "pointer" }}>{previewTitle}</div>
          <div style={{ fontSize: 13, color: "#006621", fontFamily: "Arial, sans-serif", marginBottom: 4 }}>{previewUrl}</div>
          <div style={{ fontSize: 13, color: "#545454", fontFamily: "Arial, sans-serif", lineHeight: 1.5 }}>{previewDesc}</div>
        </div>
      </div>

      <button onClick={() => save({ ...data, seo: form })} style={{ ...addBtnStyle, marginBottom: 32 }}>Uložit SEO nastavení</button>
    </div>
  );
}

const fieldInputStyle = { width: "100%", background: "rgba(255,255,255,.04)", border: "1px solid rgba(255,255,255,.08)", borderRadius: 8, padding: "10px 14px", color: "#fff", fontFamily: "inherit", fontSize: 13, outline: "none" };

// ===== SETTINGS TAB =====
function SettingsTab({ data, save }) {
  const [form, setForm] = useState(data.siteSettings);
  const [pwForm, setPwForm] = useState({ current: "", newPw: "", confirm: "" });
  const [pwMsg, setPwMsg] = useState(null);
  const [pwLoading, setPwLoading] = useState(false);

  const resetAll = () => {
    save(DEFAULT_DATA);
    setForm(DEFAULT_DATA.siteSettings);
  };

  const changePassword = async () => {
    setPwMsg(null);
    if (!pwForm.newPw || pwForm.newPw.length < 4) {
      setPwMsg({ type: "err", text: "Heslo musí mít alespoň 4 znaky" });
      return;
    }
    if (pwForm.newPw !== pwForm.confirm) {
      setPwMsg({ type: "err", text: "Hesla se neshodují" });
      return;
    }
    setPwLoading(true);
    try {
      const res = await fetch("/api/change-password", {
        method: "POST",
        headers: { "Content-Type": "application/json", "Authorization": "Bearer " + getToken() },
        body: JSON.stringify({ newPassword: pwForm.newPw }),
      });
      if (res.status === 401) {
        setPwMsg({ type: "err", text: "Nesprávné aktuální heslo" });
        setPwLoading(false);
        return;
      }
      if (!res.ok) {
        const d = await res.json().catch(() => ({}));
        setPwMsg({ type: "err", text: d.error || "Chyba serveru" });
        setPwLoading(false);
        return;
      }
      // Update token in session with new password
      sessionStorage.setItem("admin-token", getAdminEmail() + ":" + pwForm.newPw);
      setPwForm({ current: "", newPw: "", confirm: "" });
      setPwMsg({ type: "ok", text: "Heslo změněno" });
    } catch (e) {
      setPwMsg({ type: "err", text: "Chyba připojení" });
    }
    setPwLoading(false);
  };

  return (
    <div>
      <h1 style={{ fontSize: 22, fontWeight: 800, marginBottom: 4 }}>Nastavení webu</h1>
      <p style={{ fontSize: 13, color: "#8a8a9a", marginBottom: 24 }}>Globální nastavení stránky</p>
      <div style={{ display: "flex", flexDirection: "column", gap: 16, maxWidth: 600 }}>
        <Field label="Název brandu" value={form.brandName} onChange={v => setForm({ ...form, brandName: v })} placeholder="Název vaší firmy / značky" />
        <Field label="Hero headline" value={form.heroHeadline} onChange={v => setForm({ ...form, heroHeadline: v })} placeholder="Hlavní nadpis na homepage" />
        <Field label="Hero subtext" value={form.heroSub} onChange={v => setForm({ ...form, heroSub: v })} textarea placeholder="Podnadpis pod hlavním nadpisem na homepage" />
        <Field label="Kontaktní email" value={form.email} onChange={v => setForm({ ...form, email: v })} placeholder="vas@email.com" />
        <div style={{ display: "flex", gap: 12 }}>
          <button onClick={() => save({ ...data, siteSettings: form })} style={addBtnStyle}>Uložit</button>
          <button onClick={resetAll} style={{ ...addBtnStyle, background: "#ef4444" }}>Reset na default</button>
        </div>
      </div>

      {/* PASSWORD CHANGE */}
      <div style={{ borderTop: "1px solid rgba(255,255,255,.06)", marginTop: 40, paddingTop: 32 }}>
        <h2 style={{ fontSize: 18, fontWeight: 800, marginBottom: 4 }}>Změna hesla</h2>
        <p style={{ fontSize: 13, color: "#8a8a9a", marginBottom: 20 }}>Změnit přihlašovací heslo do admin panelu</p>
        <div style={{ display: "flex", flexDirection: "column", gap: 14, maxWidth: 400 }}>
          <Field label="Nové heslo" value={pwForm.newPw} onChange={v => setPwForm({ ...pwForm, newPw: v })} placeholder="Min. 4 znaky" />
          <Field label="Potvrzení hesla" value={pwForm.confirm} onChange={v => setPwForm({ ...pwForm, confirm: v })} placeholder="Zadejte znovu" />
          {pwMsg && <div style={{ fontSize: 13, fontWeight: 600, color: pwMsg.type === "err" ? "#ef4444" : "#00eb00" }}>{pwMsg.text}</div>}
          <button onClick={changePassword} disabled={pwLoading} style={{ ...addBtnStyle, alignSelf: "flex-start", opacity: pwLoading ? 0.6 : 1 }}>
            {pwLoading ? "Měním..." : "Změnit heslo"}
          </button>
        </div>
      </div>
    </div>
  );
}

// ===== MODAL FORM =====
function ModalForm({ modal, close, addItem, updateItem }) {
  const isEdit = !!modal.editing;
  const type = modal.type;
  const [form, setForm] = useState(modal.editing || getDefaults(type));
  const set = (k, v) => setForm({ ...form, [k]: v });

  const submit = () => {
    const section = { thumbnail: "thumbnails", creator: "creators", review: "reviews", stat: "stats", process: "process", faq: "faq", social: "socials" }[type];
    if (isEdit) updateItem(section, modal.editing.id, form);
    else addItem(section, form);
  };

  return (
    <div onClick={close} style={{ position: "fixed", inset: 0, background: "rgba(0,0,0,.7)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9998, backdropFilter: "blur(8px)" }}>
      <div onClick={e => e.stopPropagation()} style={{ background: "#161619", border: "1px solid rgba(255,255,255,.08)", borderRadius: 16, padding: 28, width: 440, maxHeight: "80vh", overflowY: "auto" }}>
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 20 }}>
          <h2 style={{ fontSize: 18, fontWeight: 800 }}>{isEdit ? "Upravit" : "Přidat"} {typeLabel(type)}</h2>
          <button onClick={close} style={{ background: "none", border: "none", color: "#8a8a9a", cursor: "pointer" }}>{Icons.x}</button>
        </div>
        <div style={{ display: "flex", flexDirection: "column", gap: 14 }}>
          {type === "thumbnail" && <>
            <ImageUpload label="Obrázek thumbnaily" value={form.image || ""} onChange={v => set("image", v)} />
            <Field label="Název videa" value={form.title} onChange={v => set("title", v)} placeholder="např. TOP 10 PLAYS" />
            <Field label="Kanál" value={form.channel} onChange={v => set("channel", v)} placeholder="např. GamerPro" />
            <Field label="Iniciály kanálu" value={form.channelAvatar} onChange={v => set("channelAvatar", v)} placeholder="např. GP (zobrazí se v avataru)" />
            <Field label="Views" value={form.views} onChange={v => set("views", v)} placeholder="např. 1.2M" />
            <div>
              <div style={labelStyle}>Kategorie</div>
              <div style={{ display: "flex", gap: 8 }}>
                {[["showcase1","Showcase #1 (s profilkou)"],["showcase2","Showcase #2 (jen obrázky)"]].map(([k,l]) => (
                  <button key={k} onClick={() => set("category", k)} style={{ flex: 1, padding: "10px", borderRadius: 8, border: "1px solid " + (form.category === k ? "#00eb00" : "rgba(255,255,255,.06)"), background: form.category === k ? "rgba(0,235,0,.1)" : "transparent", color: form.category === k ? "#00eb00" : "#8a8a9a", cursor: "pointer", fontFamily: "inherit", fontSize: 12, fontWeight: 600 }}>{l}</button>
                ))}
              </div>
            </div>
          </>}
          {type === "creator" && <>
            <Field label="Jméno" value={form.name} onChange={v => set("name", v)} placeholder="např. Martin K." />
            <ImageUpload label="Foto / Avatar" value={form.avatar || ""} onChange={v => set("avatar", v)} rounded />
            <Field label="Iniciály" value={form.initials} onChange={v => set("initials", v)} placeholder="např. MK (záložní, když není foto)" />
            <Field label="Odběratelé" value={form.subs} onChange={v => set("subs", v)} placeholder="např. 1.2M" />
          </>}
          {type === "review" && <>
            <Field label="Text recenze" value={form.text} onChange={v => set("text", v)} textarea placeholder="Citace klienta, např. Absolutely incredible work..." />
            <Field label="Autor" value={form.author} onChange={v => set("author", v)} placeholder="Celé jméno autora recenze" />
            <ImageUpload label="Avatar autora" value={form.avatar || ""} onChange={v => set("avatar", v)} rounded />
            <Field label="Handle" value={form.handle} onChange={v => set("handle", v)} placeholder="např. @MartinK (sociální síť)" />
            <Field label="Odběratelé" value={form.subs} onChange={v => set("subs", v)} placeholder="např. 1.2M" />
            <div>
              <div style={labelStyle}>Hodnocení</div>
              <div style={{ display: "flex", gap: 4 }}>
                {[1,2,3,4,5].map(n => (
                  <button key={n} onClick={() => set("rating", n)} style={{ background: "none", border: "none", fontSize: 22, cursor: "pointer", color: n <= form.rating ? "#fbbf24" : "#333" }}>{"\u2605"}</button>
                ))}
              </div>
            </div>
          </>}
          {type === "stat" && <>
            <Field label="Hodnota" value={form.value} onChange={v => set("value", v)} placeholder="200M+" />
            <Field label="Popis" value={form.label} onChange={v => set("label", v)} placeholder="Views Generated" />
          </>}
          {type === "process" && <>
            <Field label="Název kroku" value={form.title} onChange={v => set("title", v)} placeholder="např. Brief & Strategy" />
            <Field label="Popis" value={form.desc} onChange={v => set("desc", v)} textarea placeholder="Podrobný popis tohoto kroku procesu..." />
            <ImageUpload label="Obrázek kroku" value={form.img || ""} onChange={v => set("img", v)} />
          </>}
          {type === "faq" && <>
            <Field label="Otázka" value={form.q} onChange={v => set("q", v)} placeholder="např. How fast do you deliver?" />
            <Field label="Odpověď" value={form.a} onChange={v => set("a", v)} textarea placeholder="Odpověď na otázku..." />
          </>}
          {type === "social" && <>
            <Field label="Platforma" value={form.platform} onChange={v => set("platform", v)} placeholder="např. Instagram, Twitter / X, Behance" />
            <Field label="URL" value={form.url} onChange={v => set("url", v)} placeholder="https://instagram.com/vasprofil" />
            <ImageUpload label="Ikona platformy" value={form.icon || ""} onChange={v => set("icon", v)} rounded />
          </>}
        </div>
        <div style={{ display: "flex", gap: 10, marginTop: 20 }}>
          <button onClick={submit} style={{ ...addBtnStyle, flex: 1, justifyContent: "center" }}>{isEdit ? "Uložit změny" : "Přidat"}</button>
          <button onClick={close} style={{ ...addBtnStyle, flex: 1, justifyContent: "center", background: "rgba(255,255,255,.06)", color: "#8a8a9a" }}>Zrušit</button>
        </div>
      </div>
    </div>
  );
}

// ===== IMAGE UPLOAD COMPONENT =====
function ImageUpload({ label, value, onChange, rounded }) {
  const inputRef = useRef(null);
  const [uploading, setUploading] = useState(false);
  const [dragOver, setDragOver] = useState(false);

  const upload = async (file) => {
    if (!file) return;
    setUploading(true);
    try {
      const res = await fetch("/api/upload", {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + getToken(),
          "Content-Type": file.type,
          "X-Filename": file.name,
        },
        body: file,
      });
      if (!res.ok) throw new Error("Upload failed");
      const data = await res.json();
      onChange(data.url);
    } catch (e) {
      alert("Chyba při nahrávání: " + e.message);
    }
    setUploading(false);
  };

  const handleDrop = (e) => {
    e.preventDefault();
    setDragOver(false);
    const file = e.dataTransfer.files[0];
    if (file && file.type.startsWith("image/")) upload(file);
  };

  const previewStyle = rounded
    ? { width: 64, height: 64, borderRadius: "50%", objectFit: "cover", border: "2px solid rgba(255,255,255,.08)" }
    : { maxWidth: "100%", maxHeight: 140, borderRadius: 8, objectFit: "cover", border: "1px solid rgba(255,255,255,.08)" };

  return (
    <div>
      <div style={labelStyle}>{label}</div>
      <div
        onDragOver={(e) => { e.preventDefault(); setDragOver(true); }}
        onDragLeave={() => setDragOver(false)}
        onDrop={handleDrop}
        style={{ border: "1px dashed " + (dragOver ? "#00eb00" : "rgba(255,255,255,.12)"), borderRadius: 10, padding: 14, background: dragOver ? "rgba(0,235,0,.04)" : "rgba(255,255,255,.02)", transition: "all .2s" }}
      >
        {value && <div style={{ marginBottom: 10 }}><img src={value} alt="Preview" style={previewStyle} onError={e => { e.target.style.display = "none"; }} /></div>}
        <div style={{ display: "flex", gap: 8, alignItems: "center", flexWrap: "wrap" }}>
          <button onClick={() => inputRef.current.click()} disabled={uploading} style={{ padding: "7px 16px", borderRadius: 8, border: "1px solid rgba(255,255,255,.1)", background: "rgba(255,255,255,.06)", color: "#fff", cursor: "pointer", fontFamily: "inherit", fontSize: 12, fontWeight: 600, opacity: uploading ? 0.5 : 1 }}>
            {uploading ? "Nahrávám..." : "Nahrát obrázek"}
          </button>
          <span style={{ fontSize: 11, color: "#55555f" }}>nebo přetáhni sem</span>
          {value && <button onClick={() => onChange("")} style={{ marginLeft: "auto", padding: "5px 10px", borderRadius: 6, border: "none", background: "rgba(239,68,68,.15)", color: "#ef4444", cursor: "pointer", fontFamily: "inherit", fontSize: 11, fontWeight: 600 }}>Odebrat</button>}
        </div>
        <input ref={inputRef} type="file" accept="image/*" style={{ display: "none" }} onChange={e => { if (e.target.files[0]) upload(e.target.files[0]); }} />
        <input value={value || ""} onChange={e => onChange(e.target.value)} style={{ width: "100%", background: "rgba(255,255,255,.04)", border: "1px solid rgba(255,255,255,.06)", borderRadius: 6, padding: "6px 10px", color: "#fff", fontFamily: "inherit", fontSize: 11, outline: "none", marginTop: 8 }} placeholder="nebo vlož URL obrázku" />
      </div>
    </div>
  );
}

// ===== HELPER COMPONENTS =====
function Field({ label, value, onChange, textarea, placeholder }) {
  const style = { width: "100%", background: "rgba(255,255,255,.04)", border: "1px solid rgba(255,255,255,.08)", borderRadius: 8, padding: "10px 14px", color: "#fff", fontFamily: "inherit", fontSize: 13, outline: "none", resize: "vertical" };
  return (
    <div>
      <div style={labelStyle}>{label}</div>
      {textarea
        ? <textarea value={value} onChange={e => onChange(e.target.value)} style={{ ...style, minHeight: 80 }} placeholder={placeholder} />
        : <input value={value} onChange={e => onChange(e.target.value)} style={style} placeholder={placeholder} />}
    </div>
  );
}

function GradientPicker({ value, onChange }) {
  return (
    <div>
      <div style={labelStyle}>Barva pozadí</div>
      <div style={{ display: "flex", gap: 8, flexWrap: "wrap" }}>
        {GRADIENTS.map((g, i) => (
          <button key={i} onClick={() => onChange(i)}
            style={{ width: 36, height: 36, borderRadius: 8, background: g, border: value === i ? "2px solid #00eb00" : "2px solid transparent", cursor: "pointer", transition: "all .2s" }} />
        ))}
      </div>
    </div>
  );
}

function ColorPicker({ value, onChange }) {
  return (
    <div>
      <div style={labelStyle}>Barva avataru</div>
      <div style={{ display: "flex", gap: 8, flexWrap: "wrap" }}>
        {AVATAR_COLORS.map((c, i) => (
          <button key={i} onClick={() => onChange(i)}
            style={{ width: 32, height: 32, borderRadius: "50%", background: c, border: value === i ? "2px solid #fff" : "2px solid transparent", cursor: "pointer" }} />
        ))}
      </div>
    </div>
  );
}

function getDefaults(type) {
  const d = {
    thumbnail: { title: "", channel: "", channelAvatar: "", views: "", icon: "\u{1f3ae}", gradient: 0, category: "showcase1", image: "" },
    creator: { name: "", initials: "", subs: "", color: 0, avatar: "" },
    review: { text: "", author: "", handle: "", subs: "", color: 0, rating: 5, avatar: "" },
    stat: { value: "", label: "" },
    process: { title: "", desc: "", img: "" },
    faq: { q: "", a: "" },
    social: { platform: "", url: "", icon: "" },
  };
  return d[type] || {};
}

function typeLabel(t) {
  return { thumbnail: "thumbnail", creator: "tvůrce", review: "recenzi", stat: "statistiku", process: "krok", faq: "FAQ", social: "sociální síť" }[t] || t;
}

const labelStyle = { fontSize: 12, fontWeight: 600, color: "#8a8a9a", marginBottom: 6 };
const addBtnStyle = { display: "inline-flex", alignItems: "center", gap: 8, padding: "10px 20px", borderRadius: 10, border: "none", background: "#00eb00", color: "#fff", fontFamily: "inherit", fontSize: 13, fontWeight: 700, cursor: "pointer" };
const smallBtnStyle = { background: "rgba(255,255,255,.04)", border: "1px solid rgba(255,255,255,.06)", borderRadius: 8, padding: "8px 10px", color: "#8a8a9a", cursor: "pointer", display: "flex", alignItems: "center" };

// ===== RENDER =====
const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(<App />);
</script>
</body>
</html>
